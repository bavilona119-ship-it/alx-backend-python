#!/bin/bash
# kurbeScript - Set up and verify a local Kubernetes cluster using Minikube

# Exit immediately if a command exits with a non-zero status
set -e

echo "🚀 Starting Kubernetes setup..."

# Step 1: Check if Minikube is installed
if ! command -v minikube &> /dev/null
then
    echo "❌ Minikube not found! Please install it first."
    echo "You can install Minikube using:"
    echo "  curl -LO https://storage.googleapis.com/minikube/releases/latest/minikube-linux-amd64"
    echo "  sudo install minikube-linux-amd64 /usr/local/bin/minikube"
    exit 1
else
    echo "✅ Minikube is installed."
fi

# Step 2: Start Minikube (this will start a local Kubernetes cluster)
echo "⚙️  Starting Minikube cluster..."
minikube start

# Step 3: Verify the cluster is running
echo "🔍 Verifying Kubernetes cluster status..."
kubectl cluster-info

# Step 4: List available pods (there may be none initially)
echo "📦 Retrieving current pods..."
kubectl get pods -A

echo "✅ Kubernetes local cluster setup completed successfully!"

